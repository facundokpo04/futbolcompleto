!function(e,t,i){if("undefined"!=typeof acf){var a=function(){setTimeout(function(){e("#acf-rc-popup").remove()},200)},n=function(){"undefined"==typeof window.acf_relationship_create_field||"undefined"==typeof window.acf_relationship_create_field.ajax_url||"undefined"==typeof window.acf_relationship_create_field.current_user||isNaN(window.acf_relationship_create_field.current_user)||e.ajax({url:window.acf_relationship_create_field.ajax_url,method:"POST",data:{action:"acf_rc_increment",user:window.acf_relationship_create_field.current_user},dataType:"json"}).done(function(e){"undefined"!=typeof e.success&&e.success&&"undefined"!=typeof e.data.review_msg_dismissed&&(e.data.review_msg_dismissed||"undefined"!=typeof e.data.uses&&(isNaN(e.data.uses)||"undefined"!=typeof e.data.rating_message_recurrence&&(isNaN(e.data.rating_message_recurrence)||e.data.uses%e.data.rating_message_recurrence==0&&confirm(window.acf_relationship_create_field.i18n.please_review)&&window.open("https://wordpress.org/support/plugin/quick-and-easy-post-creation-for-acf-relationship-fields/reviews/","_blank"))))})};acf.fields.relationship.acf_rc_tooltip_open=function(t){t.preventDefault(),e("#acf-rc-popup").remove();var i=e(t.target);if(i.is(".acf-relationship-create-link")||(i=i.parents(".acf-relationship-create-link:first")),1==i.length){var n=acf.fields.relationship.acf_rc_get_field_wrapper(i);if(1!=n.length)return void console.warn("[acf-relationship-create | acf_rc_tooltip_open ] No wrapper found",i);var r=n.find(".acf_relationship");if(1==r.length||(r=n.find("select.post_object"),1==r.length)){if(acf.fields.relationship.set({$el:r}),"undefined"!=typeof acf.fields.relationship.o.max&&acf.fields.relationship.$right.find("a").length>=acf.fields.relationship.o.max)return alert(acf.l10n.relationship.max.replace("{max}",acf.fields.relationship.o.max)),!1;var o=e(n.find(".acf-rc-popup-wrapper").html()),c=i.parents(".media-modal:first"),f=1==c.length;f?(c.find("div.media-frame-content div.settings").prepend(o),o.css({top:i.position().top-o.height()-6+(i.outerHeight(!0)-i.innerHeight()),left:i.position().left-o.width()/2+i.outerWidth(!0)/2})):(e("body").prepend(o),o.css({top:i.offset().top-o.height()-6,left:i.offset().left-o.width()/2+i.outerWidth(!0)/2}));var s=o.children(".focus");s.trigger("focus"),s.on("blur",function(){a()}),o.on("click","a",function(t){t.preventDefault(),n.data("acfRcOpenUrl",{url:e(this).attr("data-create-url"),title:e(this).attr("title")}),acf.fields.relationship.acf_rc_lightbox_open()})}}},e(document).on("click",".acf-relationship-create-link",function(e){acf.fields.relationship.acf_rc_tooltip_open(e)}),acf.fields.relationship.acf_rc_lightbox_open=function(t){var i=acf.fields.relationship.acf_rc_get_field_wrapper(this.$el);if(1!=i.length)return void console.warn("[acf-relationship-create | acf_rc_lightbox_open ] No wrapper found",e(t.target));var a=i.data("acfRcOpenUrl").url.replace("__acf_rc_original_field_uniqid__",i.attr("data-acf-rc-uniqid")),n=i.parents(".media-modal:first");1==n.length?(a=a.replace("__acf_rc_from_content_type__","attachment"),a=a.replace("__acf_rc_from_content_ID__",n.find("div.media-frame-content div.attachment-details").attr("data-id"))):(a=a.replace("__acf_rc_from_content_type__",e('form#post input[name="post_type"]').val()),a=a.replace("__acf_rc_from_content_ID__",e('form#post input[name="post_ID"]').val())),tb_show(i.data("acfRcOpenUrl").title,a)},acf.fields.relationship.acf_rc_on_content_created=function(i,a,r){if("undefined"!=typeof a){var o=e('[data-acf-rc-uniqid="'+a+'"]');if(1==o.length){"undefined"!=typeof r.post_title&&""!=r.post_title||(r.post_title=window.acf_relationship_create_field.i18n.no_title);var c="relationship",f=o.find(".acf_relationship");if(1!=f.length){if(f=o.find("select.post_object"),1!=f.length)return;c="post_object"}switch(c){case"relationship":f.attr("data-acf_relationship_created_post_id",r.post_id+"-"+a),acf.fields.relationship.set({$el:f}).fetch();break;case"post_object":var s=e("<option></option>").val(r.post_id).text(r.post_title);f.find('optgroup[label="'+t.get_post_type_label(r.post_type)+'"]').prepend(s),s.prop("selected","selected"),f.trigger("change"),n()}}}},acf.fields.relationship.acf_rc_get_field_wrapper=function(e){if(e.is('[data-acf-relationship-create-enabled="true"]'))return e;var t=e.parents('tr[class^="compat-field-fields"]:first');return 1!=t.length&&(t=e.parents(".field_type-relationship:first")),1!=t.length&&(t=e.parents(".field_type-post_object:first")),t},e(document).ajaxComplete(function(i,a,r,o){var c=t.parse_query_string("foobar?"+decodeURIComponent(r.data));if("undefined"!=typeof c.acf_relationship_created_post_id){var f=c.acf_relationship_created_post_id.split("-");if("undefined"!=typeof f[1]){var s=e('[data-acf-rc-uniqid="'+f[1]+'"]');if(1!=s.length)return void console.warn("[acf-relationship-create | ajaxComplete ] No wrapper found",f[1]);var l=s.find(".acf_relationship");if(1==l.length){var d=l.find(".relationship_left .relationship_list li:not(.hide) a");1==d.length&&d.trigger("click"),l.attr("data-acf_relationship_created_post_id",""),acf.fields.relationship.set({$el:l}).fetch(),n()}}}}),e(document).on("acf-relationship-create/created",function(e,t,i){acf.fields.relationship.acf_rc_on_content_created(e,t,i),tb_remove()}),e(document).ready(function(){function i(e){var i=e.find("a.acf-relationship-create-link");1==i.length&&(e.attr("data-acf-rc-uniqid",t.generate_random_id()),e.attr("data-acf-relationship-create-enabled",!0),i.detach().appendTo(e.find(".label")))}t.get_parent_iframe()!==!1&&(t.hide_admin_bar(),t.hide_admin_menu()),e(document).on("acf/setup_fields",function(t,a){e(a).find(".acf_relationship, select.post_object").each(function(){acf.fields.relationship.set({$el:e(this)}).init();var t=acf.fields.relationship.acf_rc_get_field_wrapper(e(this));return 1!=t.length?void console.warn("[acf-relationship-create | acf/setup_fields ] No wrapper found for this relationship field",e(this)):void i(t)})})})}}(jQuery,window.acf_relationship_create||{});